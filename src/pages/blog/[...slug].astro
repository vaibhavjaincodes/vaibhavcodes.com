---
import { type CollectionEntry, getCollection } from 'astro:content';
import '../../styles/global.css';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

type Props = CollectionEntry<'blog'>;

const post = Astro.props;
const { Content } = await post.render();
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{post.data.title} | Vaibhav Jain</title>
    <meta name="description" content={post.data.description} />
  </head>
  <body class="font-sans bg-white">
    <!-- Header -->
    <header class="bg-white/95 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-50">
      <nav class="flex justify-between items-center py-5 px-6 max-w-6xl mx-auto">
        <div class="text-xl font-extrabold text-slate-900 tracking-tight">
          <a href="/" class="hover:text-indigo-600 transition-colors">Vaibhav Jain</a>
        </div>
        <ul class="flex gap-10 list-none">
          <li><a href="/blog" class="text-indigo-600 font-medium text-sm transition-colors">Blog</a></li>
          <li><a href="/courses" class="text-slate-600 font-medium text-sm hover:text-indigo-600 transition-colors">Courses</a></li>
          <li><a href="/papers" class="text-slate-600 font-medium text-sm hover:text-indigo-600 transition-colors">Papers</a></li>
          <li><a href="/books" class="text-slate-600 font-medium text-sm hover:text-indigo-600 transition-colors">Books</a></li>
        </ul>
      </nav>
    </header>

    <main class="py-16 bg-white">
      <div class="max-w-4xl mx-auto px-6">
        <article>
          <header class="text-center mb-16">
            <div class="flex justify-center items-center gap-8 mb-8 flex-wrap">
              <time datetime={post.data.publishDate.toISOString()} class="text-slate-500 text-sm">
                {post.data.publishDate.toLocaleDateString('en-US', {
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric',
                })}
              </time>
              {post.data.tags && (
                <div class="flex gap-2 flex-wrap">
                  {post.data.tags.map((tag) => (
                    <span class="bg-indigo-600 text-white px-3 py-1 rounded-full text-xs font-semibold">{tag}</span>
                  ))}
                </div>
              )}
            </div>
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-slate-900 mb-6 tracking-tight leading-tight">{post.data.title}</h1>
            <p class="text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed">{post.data.description}</p>
          </header>

          <div class="max-w-none text-slate-700 leading-relaxed [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:text-slate-900 [&>h1]:mt-8 [&>h1]:mb-4 [&>h2]:text-xl [&>h2]:font-bold [&>h2]:text-slate-900 [&>h2]:mt-6 [&>h2]:mb-3 [&>h2]:border-b [&>h2]:border-slate-200 [&>h2]:pb-2 [&>h3]:text-lg [&>h3]:font-bold [&>h3]:text-slate-900 [&>h3]:mt-6 [&>h3]:mb-3 [&>p]:mb-4 [&>p]:leading-7 [&>ul]:mb-4 [&>ul]:ml-6 [&>ul]:list-disc [&>li]:mb-2 [&>strong]:font-semibold [&>strong]:text-slate-900 [&>a]:text-indigo-600 [&>a]:no-underline hover:[&>a]:underline [&>code]:bg-slate-100 [&>code]:px-1 [&>code]:py-0.5 [&>code]:rounded [&>code]:text-sm [&>code]:font-mono">
            <Content />
          </div>
        </article>
        
        <footer class="mt-16 pt-8 border-t border-slate-200">
          <div class="">
            <a href="/blog" class="text-indigo-600 hover:text-indigo-800 font-semibold transition-colors inline-flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
              </svg>
              Back to all posts
            </a>
          </div>
        </footer>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 py-12 text-center">
      <div class="max-w-6xl mx-auto px-6">
        <p class="text-sm">&copy; 2025 Vaibhav Jain. Building the future, one explanation at a time.</p>
      </div>
    </footer>
  </body>
</html>


